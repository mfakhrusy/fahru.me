<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Asynchronous JavaScript - My Tech Blog</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./assets/airfoil-simulation/airfoil-simulation.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Code+Pro&display=swap" rel="stylesheet">
</head>
<body>

    <header class="container">
        <div class="header-content">
            <h1><a href="/">std::fahru's finite space</a></h1>
            <p class="subtitle">An assortment of emotions about the state of my mind</p>
        </div>
    </header>

    <main class="container container-post">
        <article class="post-full">
            <header class="post-header">
                <h2>This is a work in progress of me writing an article about building an airfoil simulator (in Rust)</h2>
                <!-- <p class="post-meta">Published on July 11, 2025 by yours truly</p> -->
            </header>

            <div class="post-content">
                <p>One concept that may not be generally known among the general masses is the concept of airfoils. What are those, really? Are those related to airplane? Yes!</p>
                <figure>
                    <img src="./assets/airfoil-simulation/airfoil_from_wiki.svg" alt="Diagram of an airfoil" class="content-image">
                    <figcaption>
                        <small>
                            Airfoil. By <a href="//commons.wikimedia.org/wiki/User:Ariadacapo" title="User:Ariadacapo" target="_blank" rel="noreferrer noopener">Olivier Cleynen</a> (<span class="int-own-work" lang="en">Own work</span>), <a href="http://creativecommons.org/publicdomain/zero/1.0/deed.en" title="Creative Commons Zero, Public Domain Dedication" target="_blank" rel="noreferrer noopener">CC0</a>. <a href="https://commons.wikimedia.org/w/index.php?curid=16100403" target="_blank" rel="noreferrer noopener">View on Wikimedia Commons</a>
                        </small>
                    </figcaption>
                </figure>
                <p>To understand the picture above, you need to imagine cutting an airplane wing and look at it from the side, which is called the cross-section of the wing.</p>
                <p>Many modern airplanes are using proprietary airfoil designs, but there is a great source of open-source airfoils that we can use to create our simulation. There's a website called <a href="https://web.archive.org/web/20250325091354/http://airfoiltools.com/" target="_blank" rel="noreferrer noopener">Airfoil Tools</a> that we can use to download many airfoil data.</p>
                <p>To start with this project, I'm going to also go over about the basic ideas of computational fluid dynamics: what is it, and how does it work with airfoils?</p>
                <p>First, an initial question: What does it mean by "simulating" an airfoil? Simulation usually involves creating a digital representation of something to make it easier to understand or demonstrate. That means, in the case of airfoils, we will simulate real airfoils in a virtual environment.</p>
                <p>Let us start with a simple tool to visualize an airfoil from a series of points. I hand-picked the available airfoil list from airfoiltools.</p>
                <div class="airfoil-visualizer">
                    <div class="controls-grid">
                        <div class="control-group">
                            <label for="airfoil-select" class="control-label">Select Airfoil</label>
                            <select id="airfoil-select" class="control-input">
                                <option value="">Choose an airfoil...</option>
                                <option value="dayton-wright-6">Dayton-Wright 6</option>
                                <option value="fx60-100">FX60-100</option>
                                <option value="la2573a">LA2573A</option>
                                <option value="naca-0012">NACA 0012</option>
                                <option value="naca-0015">NACA 0015</option>
                                <option value="naca-6409">NACA 6409</option>
                            </select>
                        </div>
                    </div>

                    <!-- Tab Navigation -->
                    <div class="tab-nav">
                        <button class="tab-button active" data-tab="visualization">Visualization</button>
                        <button class="tab-button" data-tab="data">Raw Data</button>
                    </div>

                    <!-- Tab Content -->
                    <div class="tab-content">
                        <!-- Visualization Tab -->
                        <div id="visualization-tab" class="tab-pane active">
                            <div class="canvas-container">
                                <canvas id="airfoil-canvas" class="airfoil-canvas"></canvas>
                            </div>
                        </div>

                        <!-- Data Tab -->
                        <div id="data-tab" class="tab-pane">
                            <div class="data-container">
                                <div class="data-info">
                                    <p id="point-count">No data loaded</p>
                                </div>
                                <div class="table-container">
                                    <table id="data-table" class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Point #</th>
                                                <th>X Coordinate</th>
                                                <th>Y Coordinate</th>
                                            </tr>
                                        </thead>
                                        <tbody id="data-table-body">
                                            <tr>
                                                <td colspan="3" class="no-data">Select an airfoil to view data</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p>Simulating airfoil actually means simulating the airflow around the airfoil shape. That means, we need to, somehow, express all of the empty points outside of the airfoil in <strong>the computational domain</strong>.</p>
                <h3>The Computational Domain</h3>
                <p>To express the computational domain, we use something called a <strong>grid</strong> or a <strong>mesh</strong>. Both terms sometimes used interchangeable, and they refer to a same principle: dividing the space (computational domain) into a small pieces</p>
                <p>Let's improve our tools by implementing a grid system for our airfoil visualizer. Airfoil looks very complex though, maybe we can start with a simple square shape with a square grids around it.</p>
                <div class="airfoil-visualizer">
                    <canvas class="airfoil-canvas airfoil-canvas-grids" id="square-shape-grids"></canvas>
                </div>
                <p>The image above, while not perfect, represent a rough estimation on how the computational domain works. We basically need to simulate anything that we need for each of the smaller squares above. This usually involves calculating something for each square. This "something" depends on our goal. Since our goal is an airfoil, and airfoil simulation usually focuses when it's flying, the calculation involves some properties when the airfoil interact with airflow.</p>
                <p>Square is easy though, maybe let's try circle shape next. Circle is harder because square grids cannot be easily placed around it, especially is the outer canvas is a square shape as we have above. But let's try anyway.</p>
                <div class="airfoil-visualizer">
                    <canvas class="airfoil-canvas airfoil-canvas-grids" id="circle-shape-grids"></canvas>
                </div>
                <p>Well, that is horrendous! Let's see if we can improve it by using a different system. One of the most obvious system we can try is the <strong>Polar Coordinate System</strong>, let's see how far we can go with this.</p>
                <div class="polar-cartesian-container">
                    <!-- Polar Coordinate System -->
                    <div class="polar-cartesian-content">
                        <h3>Polar Coordinates (r-θ)</h3>
                        <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                            <!-- Grid: Concentric Circles -->
                            <circle cx="200" cy="200" r="40" class="grid-line"/>
                            <circle cx="200" cy="200" r="80" class="grid-line"/>
                            <circle cx="200" cy="200" r="120" class="grid-line"/>
                            <circle cx="200" cy="200" r="160" class="grid-line" fill="#123456"/>

                            <!-- Axis -->
                            <line x1="20" y1="200" x2="380" y2="200" class="axis-line"/>
                            <line x1="200" y1="20" x2="200" y2="380" class="axis-line"/>
                            
                            <!-- Point P(r, θ) defined by r=140, θ=30° -->
                            <g transform="translate(200, 200) rotate(-30)">
                                <g transform="translate(140, 0)">
                                    <line x1="-140" y1="0" x2="0" y2="0" class="radius-line"/>
                                    <circle cx="0" cy="0" r="6" class="point"/>
                                </g>
                            </g>

                            <!--
                                This SVG <path> element draws a segment of an arc with the following properties:
                                - Starts at coordinates (200, 200).
                                - Draws a straight line to (240, 200).
                                - Draws an arc with a radius of 40 units to (234.64, 180).
                                - The arc uses the large-arc-flag and sweep-flag set to 0 and 1, respectively.
                                - The path is closed back to the starting point.
                                - The shape is filled with a blue color (#3b82f6) at 20% opacity.
                                This path represent a highlighted region or a sector in a diagram
                            -->
                            <path d="M 200,200 L 240,200 A 40,40 0 0,1 234.64,180 Z" fill="#3b82f6" fill-opacity="0.2"/>
                            <!--
                                This SVG <path> element draws an arc representing an angle.
                                - The arc starts at coordinates (240, 200).
                                - It draws an elliptical arc with radii of 40 units in both x and y directions.
                                - The arc sweeps from the starting point to (234.64, 180).
                                - The class "angle-arc" can be used to style the arc via CSS.
                            -->
                            <path d="M 240,200 A 10,40 0 0,1 234.64,180" class="angle-arc"/>

                            <!-- Labels -->
                            <text x="205" y="218" class="label" style="fill: #cea1a1;">Origin</text>
                            <text x="280" y="195" class="label" style="fill: #cea1a1;">Polar Axis</text>
                            <text x="280" y="115" class="label" style="fill: #cea1a1;">P(<tspan class="label-variable">r</tspan>, <tspan class="label-variable">θ</tspan>)</text>
                            <text x="270" y="150" class="label-variable" fill="#ef4444">r</text>
                            <text x="250" y="190" class="label-variable" fill="#3b82f6">θ</text>
                        </svg>
                    </div>

                    <!-- Cartesian Coordinate System -->
                    <div class="polar-cartesian-content">
                        <h3>Cartesian Coordinates (x-y)</h3>
                        <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                            <!-- Grid: Vertical and Horizontal lines -->
                            <path d="M 40 20 V 380 M 80 20 V 380 M 120 20 V 380 M 160 20 V 380 M 240 20 V 380 M 280 20 V 380 M 320 20 V 380 M 360 20 V 380" class="grid-line" />
                            <path d="M 20 40 H 380 M 20 80 H 380 M 20 120 H 380 M 20 160 H 380 M 20 240 H 380 M 20 280 H 380 M 20 320 H 380 M 20 360 H 380" class="grid-line" />

                            <!-- Axes -->
                            <line x1="20" y1="200" x2="380" y2="200" class="axis-line"/>
                            <line x1="200" y1="20" x2="200" y2="380" class="axis-line"/>

                            <!-- Point P(x, y) -->
                            <!-- Converted from Polar(r=140, θ=30°): -->
                            <!-- x = r*cos(θ) = 140 * cos(30) = 140 * 0.866 = 121.24 -->
                            <!-- y = r*sin(θ) = 140 * sin(30) = 140 * 0.5 = 70 -->
                            <!-- SVG coordinates: x -> 200 + 121.24 = 321.24 -->
                            <!-- SVG coordinates: y -> 200 - 70 = 130 -->
                            <g id="pointP_cartesian" transform="translate(321.24, 130)">
                                <circle cx="0" cy="0" r="6" class="point"/>
                            </g>

                            <!-- Projection Lines -->
                            <line x1="321.24" y1="130" x2="321.24" y2="200" class="projection-line"/>
                            <line x1="321.24" y1="130" x2="200" y2="130" class="projection-line"/>

                            <!-- Labels -->
                            <text x="205" y="218" class="label">Origin</text>
                            <text x="370" y="195" class="label-variable">x-axis</text>
                            <text x="205" y="35" class="label-variable">y-axis</text>
                            <text x="325" y="125" class="label">P(<tspan class="label-variable">x</tspan>, <tspan class="label-variable">y</tspan>)</text>
                            <text x="260" y="218" class="label-variable" fill="#10b981">x</text>
                            <text x="185" y="165" class="label-variablae" fill="#10b981">y</text>
                        </svg>
                    </div>
                </div>
                <p>Let's redraw our simple grids with polar coordinates.</p>
                <div class="airfoil-visualizer">
                    <canvas class="airfoil-canvas airfoil-canvas-grids" id="circle-shape-grids-polar"></canvas>
                </div>
                <p>I'd say this looks pretty good!</p>
                <p>I also added axis lines for both polar and Cartesian coordinates to help visualize the grid system. The x, y, and r axis is a straight line, but the &#x1D703; axis goes around the circle.</p>
                <p>I want to change something, though. Instead of saying it as a polar coordinates, let's say it something else, to make it more general: Curvilinear Coordinates. Curvilinear Coordinates is a generalization of polar coordinates that allows for more flexibility in representing points in a curved space.</p>
                <p>Why do I have to use Curvilinear instead of polar? Because airfoil shapes are not circular, and it will be almost impossible to represent them accurately using polar coordinates. Maybe you have a question: "okay, then what?"</p>
        </article>
    </main>

    <footer class="container">
        <p>&#8508; Hi, there.</p>
    </footer>

    <script src="./assets/airfoil-simulation/1-airfoil-visualizer.js"></script>
    <script src="./assets/airfoil-simulation/2-square-shape-grids.js"></script>
    <script src="./assets/airfoil-simulation/3-circle-shape-grids.js"></script>
    <script src="./assets/airfoil-simulation/4-circle-shape-grids-polar.js"></script>
</body>
</html>
